// Dark Mode Overrides

[data-theme="dark"] {
  // Background and surfaces
  background-color: #0a0a0a;
  
  body {
    background-color: #0a0a0a;
    color: #e0e0e0;
  }

  // Text colors (WCAG AA compliant)
  h1, h2, h3, h4, h5, h6, h1 a, p, span, div {
    color: #f5f5f5;
  }

  a {
    color: #f5f5f5;
    
    &:hover {
      color: #bbbbbb;
    }
  }

  // Header
  .header {
    background: #1a1a1a;
    border-bottom-color: #333333;
  }

  .header__nav-link {
    color: #b8b8b8;

    &:hover {
      color: #f5f5f5;
    }
  }

  // Scoring page
  .scoring-table th,
  .scoring-table td {
    border-bottom-color: #333333;
  }

  .scoring-definitions dd {
    color: #b8b8b8;
  }

  // Cards and surfaces
  .filter-bar,
  .restaurant-card,
  .empty-state,
  .mobile-filter-drawer__content,
  .status-key {
    background: #1a1a1a;
    border-color: #333333;
  }

  .status-key__label {
    color: #f5f5f5;
  }

  .status-key__item {
    color: #b8b8b8;

    &--closed .status-key__label {
      color: #ff6b6b;
    }
  }

  // Restaurant card specific
  .restaurant-card__header {
    border-bottom-color: #333333;
  }

  .restaurant-card__title {
    color: #f5f5f5;
  }

  .restaurant-card__address {
    color: #b8b8b8;
  }

  .restaurant-card__score {
    color: #f5f5f5;
  }

  // Status tags
  .status-tag--closed {
    background: #d32f2f;
    color: #ffffff;
  }

  // Inspection sub-cards
  .inspection-item {
    background: rgba(255, 255, 255, 0.03);
    border-left-color: #333333;
  }

  .inspection-item__date,
  .inspection-item__violations strong {
    color: #f5f5f5;
  }

  .inspection-item__outcome,
  .inspection-item__score {
    color: #b8b8b8;
  }

  .inspection-item__violations {
    ul li {
      color: #f5f5f5;
    }
  }

  // Inputs and selects
  .input,
  .select {
    background-color: #0a0a0a;
    border-color: #ffffff;
    color: #f5f5f5;

    &::placeholder {
      color: #b8b8b8;
    }
  }

  // Select dropdown arrow (white for dark mode)
  .select {
    background-color: #0a0a0a;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath fill='%23ffffff' d='M6 8L0 0h12z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 16px center;
  }

  // Buttons - invert colors
  .btn {
    background-color: #ffffff;
    color: #1a1a1a !important;
    border-color: #ffffff;
    text-shadow: 2px 2px 5px rgba(255, 255, 255, 0.3);

    &:before {
      background-color: #ffffff;
    }

    &--secondary {
      background-color: #333333;
      color: #e0e0e0 !important;
      border-color: #555555;
      text-shadow: none;

      &:before {
        background-color: #333333;
      }
    }
  }

  // Theme toggle
  .theme-toggle {
    background: #1a1a1a;
    border-color: #333333;
  }

  // Export menu
  .export-menu {
    background: #1a1a1a;
    border-color: #333333;

    &__item {
      color: #f5f5f5;

      &:hover,
      &:focus-visible {
        background: #0a0a0a;
      }
    }
  }

  // Results count
  .results-count {
    color: #b8b8b8;
  }

  // Muted text (improved contrast)
  .text-muted,
  .footer__text,
  .page-title__subtitle,
  .violation-card__meta {
    color: #b8b8b8;
  }

  // Meta labels need better contrast
  .violation-card__meta-item strong {
    color: #f5f5f5;
  }

  // Severity pills (better contrast on colored backgrounds)
  .severity-pill {
    background: #0a0a0a;
    
    &:not(.active) {
      opacity: 0.5;
    }

    // Override active pill colors for better dark mode contrast
    &--high.active {
      background: #8b1a1a;
      border-color: #ff6b6b;
    }

    &--medium.active {
      background: #994d00;
      border-color: #ffb366;
    }

    &--low.active {
      background: #997a00;
      border-color: #ffe066;
    }
  }

  // Filter badge
  .filter-badge {
    background: #ffffff;
    color: #1a1a1a;
  }

  // Mobile filter drawer
  .mobile-filter-drawer {
    background: rgba(0, 0, 0, 0.8);

    &__actions {
      background: #1a1a1a;
      border-top-color: #333333;
    }
  }

  // Mobile filter labels
  .mobile-filter-label {
    color: #f5f5f5;
  }

  // Mobile filter button - white button with dark text
  .mobile-filter-btn {
    background-color: #ffffff !important;
    color: #1a1a1a !important;
    border-color: #ffffff !important;
    text-shadow: none !important;

    span {
      color: #1a1a1a !important;
    }

    &:before {
      display: none;
    }

    &:hover {
      background-color: #f0f0f0 !important;
    }

    &__badge {
      background: #d32f2f;
      color: #ffffff;
    }
  }

  // Accordion
  .inspection-accordion__trigger {
    background: rgba(255, 255, 255, 0.03);
    border-color: #333333;

    &:hover {
      background: rgba(255, 255, 255, 0.06);
    }
  }

  .inspection-accordion__summary {
    color: #f5f5f5;
  }

  .inspection-accordion__icon {
    color: #b8b8b8;
  }

  .inspection-accordion__writeup {
    background: rgba(255, 255, 255, 0.03);
    border-left-color: $color--warning;
    color: #e0e0e0;
  }

  // Severity pills in mobile drawer need better text contrast
  .severity-pill--mobile {
    &.severity-pill--high.active {
      background: #c62828;
      border-color: #ff5252;
      color: #ffffff;
    }

    &.severity-pill--medium.active {
      background: #d84315;
      border-color: #ff7043;
      color: #ffffff;
    }

    &.severity-pill--low.active {
      background: #f9a825;
      border-color: #ffd54f;
      color: #1a1a1a;
    }
  }
}
